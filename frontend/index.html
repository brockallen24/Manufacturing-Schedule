<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manufacturing Schedule - Drag & Drop</title>

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">

    <!-- Theme colors -->
    <meta name="theme-color" content="#2563eb">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- App info -->
    <meta name="application-name" content="Manufacturing Schedule">
    <meta name="apple-mobile-web-app-title" content="Mfg Schedule">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/icons/icon-512x512.png">
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png">

    <link rel="stylesheet" href="css/style.css?v=3col">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-industry"></i> Manufacturing Schedule</h1>
            <div class="header-actions">
                <button id="addJobBtn" class="btn btn-primary">
                    <i class="fas fa-plus"></i> Add New Job
                </button>
                <button id="addSetupBtn" class="btn btn-secondary">
                    <i class="fas fa-tools"></i> Add Setup/Maintenance
                </button>
                <button id="printBtn" class="btn btn-success">
                    <i class="fas fa-print"></i> Print/PDF
                </button>
                <button id="clearAllBtn" class="btn btn-danger">
                    <i class="fas fa-trash-alt"></i> Clear All
                </button>
                <button id="logoutBtn" class="btn btn-secondary" style="margin-left: auto;">
                    <i class="fas fa-sign-out-alt"></i> Logout <span id="currentUser"></span>
                </button>
            </div>
        </header>

        <!-- Tab Navigation -->
        <div class="tab-navigation">
            <button class="tab-btn active" data-tab="schedule">
                <i class="fas fa-calendar-alt"></i> Schedule Board
            </button>
            <button class="tab-btn" data-tab="priorities">
                <i class="fas fa-star"></i> Priorities
            </button>
            <button class="tab-btn" data-tab="archive">
                <i class="fas fa-archive"></i> Archive
            </button>
        </div>

        <!-- Schedule Board View -->
        <div class="schedule-board tab-content active" id="scheduleBoard" data-tab-content="schedule">
            <!-- Machine columns will be generated by JavaScript -->
        </div>

        <!-- Priorities View -->
        <div class="priorities-view tab-content" id="prioritiesView" data-tab-content="priorities">
            <div class="priorities-header">
                <h2><i class="fas fa-list-ol"></i> Machine Priorities</h2>
                <p class="priorities-subtitle">First job from each machine - Drag to reorder</p>
            </div>
            <div class="priorities-list" id="prioritiesList">
                <!-- Priority items will be generated by JavaScript -->
            </div>
        </div>

        <!-- Archive View -->
        <div class="archive-view tab-content" id="archiveView" data-tab-content="archive">
            <div class="archive-header">
                <h2><i class="fas fa-archive"></i> Archived Jobs</h2>
                <p class="archive-subtitle">Completed jobs with completion dates</p>
            </div>
            <div class="archive-list" id="archiveList">
                <!-- Archived jobs will be generated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Add Job Modal -->
    <div id="jobModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-briefcase"></i> <span id="modalTitle">Add New Job</span></h2>
                <span class="close">&times;</span>
            </div>
            <form id="jobForm">
                <div class="form-group">
                    <label for="jobName">
                        <i class="fas fa-tag"></i> Job Name *
                    </label>
                    <input type="text" id="jobName" required>
                </div>

                <div class="form-group">
                    <label for="workOrder">
                        <i class="fas fa-file-alt"></i> Work Order # *
                    </label>
                    <input type="text" id="workOrder" required>
                </div>

                <div class="form-group">
                    <label for="numParts">
                        <i class="fas fa-cubes"></i> Number of Parts *
                    </label>
                    <input type="number" id="numParts" min="1" required>
                </div>

                <div class="form-group">
                    <label for="cycleTime">
                        <i class="fas fa-clock"></i> Cycle Time (seconds) *
                    </label>
                    <input type="number" id="cycleTime" min="0" step="0.01" required>
                </div>

                <div class="form-group">
                    <label for="numCavities">
                        <i class="fas fa-grip-horizontal"></i> Number of Cavities *
                    </label>
                    <input type="number" id="numCavities" min="1" required>
                </div>

                <div class="form-group">
                    <label for="material">
                        <i class="fas fa-layer-group"></i> Material *
                    </label>
                    <input type="text" id="material" required>
                </div>

                <div class="form-group">
                    <label for="gramsPerPart">
                        <i class="fas fa-balance-scale"></i> Grams per Part
                    </label>
                    <input type="number" id="gramsPerPart" min="0" step="0.01">
                </div>

                <div class="form-group">
                    <label for="totalMaterial">
                        <i class="fas fa-weight-hanging"></i> Total Material (lbs) * (Auto-calculated)
                    </label>
                    <input type="number" id="totalMaterial" min="0" step="0.01" readonly>
                </div>

                <div class="form-group">
                    <label for="dollarPerPart">
                        <i class="fas fa-dollar-sign"></i> $ per Part
                    </label>
                    <input type="number" id="dollarPerPart" min="0" step="0.01">
                </div>

                <div class="form-group">
                    <label for="dollarPerOrder">
                        <i class="fas fa-money-bill-wave"></i> $ per Order (Auto-calculated)
                    </label>
                    <input type="number" id="dollarPerOrder" min="0" step="0.01" readonly>
                </div>

                <div class="form-group">
                    <label for="totalHours">
                        <i class="fas fa-hourglass-half"></i> Total Hours (Auto-calculated)
                    </label>
                    <input type="number" id="totalHours" min="0" step="0.01" readonly>
                </div>

                <div class="form-group">
                    <label for="dueDate">
                        <i class="fas fa-calendar-alt"></i> Due Date *
                    </label>
                    <input type="date" id="dueDate" required>
                </div>

                <div class="form-group">
                    <label for="percentComplete">
                        <i class="fas fa-tasks"></i> Percent Complete
                    </label>
                    <input type="range" id="percentComplete" min="0" max="100" value="0" step="1">
                    <div class="percent-display">
                        <span id="percentCompleteValue">0</span>%
                    </div>
                </div>

                <div class="form-group">
                    <label for="machineSelect">
                        <i class="fas fa-cog"></i> Assign to Machine *
                    </label>
                    <select id="machineSelect" required>
                        <option value="">Select Machine</option>
                        <option value="22">22</option>
                        <option value="55">55</option>
                        <option value="90-1">90-1</option>
                        <option value="90-2">90-2</option>
                        <option value="90-3">90-3</option>
                        <option value="Sumi1">Sumi1</option>
                        <option value="170-1">170-1</option>
                        <option value="170-2">170-2</option>
                        <option value="Sumi2">Sumi2</option>
                        <option value="260-1">260-1</option>
                        <option value="260-2">260-2</option>
                        <option value="260-3">260-3</option>
                        <option value="260-4">260-4</option>
                        <option value="500-1">500-1</option>
                        <option value="500-2">500-2</option>
                        <option value="550">550</option>
                        <option value="770">770</option>
                        <option value="950">950</option>
                        <option value="1100-1">1100-1</option>
                        <option value="1100-2">1100-2</option>
                        <option value="1200-1">1200-1</option>
                        <option value="1200-2">1200-2</option>
                    </select>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="submitBtn">
                        <i class="fas fa-save"></i> Save Job
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Setup/Maintenance Modal -->
    <div id="setupModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-tools"></i> <span id="setupModalTitle">Add Setup/Maintenance</span></h2>
                <span class="close-setup">&times;</span>
            </div>
            <form id="setupForm">
                <div class="form-group">
                    <label for="toolNumber">
                        <i class="fas fa-hashtag"></i> Tool Number *
                    </label>
                    <input type="text" id="toolNumber" required>
                </div>

                <div class="form-group">
                    <label for="toolReady">
                        <i class="fas fa-check-circle"></i> Tool Ready *
                    </label>
                    <select id="toolReady" required>
                        <option value="">Select Status</option>
                        <option value="yes">Yes - Ready</option>
                        <option value="no">No - Not Ready</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="setupHours">
                        <i class="fas fa-hourglass-half"></i> Total Hours *
                    </label>
                    <input type="number" id="setupHours" min="0" step="0.01" required>
                </div>

                <div class="form-group">
                    <label for="setupNotes">
                        <i class="fas fa-sticky-note"></i> Notes
                    </label>
                    <textarea id="setupNotes" rows="4" placeholder="Enter any additional notes or instructions..."></textarea>
                </div>

                <div class="form-group">
                    <label for="setupPercentComplete">
                        <i class="fas fa-tasks"></i> Percent Complete
                    </label>
                    <input type="range" id="setupPercentComplete" min="0" max="100" value="0" step="1">
                    <div class="percent-display">
                        <span id="setupPercentCompleteValue">0</span>%
                    </div>
                </div>

                <div class="form-group">
                    <label for="setupMachineSelect">
                        <i class="fas fa-cog"></i> Assign to Machine *
                    </label>
                    <select id="setupMachineSelect" required>
                        <option value="">Select Machine</option>
                        <option value="22">22</option>
                        <option value="55">55</option>
                        <option value="90-1">90-1</option>
                        <option value="90-2">90-2</option>
                        <option value="90-3">90-3</option>
                        <option value="Sumi1">Sumi1</option>
                        <option value="170-1">170-1</option>
                        <option value="170-2">170-2</option>
                        <option value="Sumi2">Sumi2</option>
                        <option value="260-1">260-1</option>
                        <option value="260-2">260-2</option>
                        <option value="260-3">260-3</option>
                        <option value="260-4">260-4</option>
                        <option value="500-1">500-1</option>
                        <option value="500-2">500-2</option>
                        <option value="550">550</option>
                        <option value="770">770</option>
                        <option value="950">950</option>
                        <option value="1100-1">1100-1</option>
                        <option value="1100-2">1100-2</option>
                        <option value="1200-1">1200-1</option>
                        <option value="1200-2">1200-2</option>
                    </select>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelSetupBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="submitSetupBtn">
                        <i class="fas fa-save"></i> Save Setup/Maintenance
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Archive Date Modal -->
    <div id="archiveDateModal" class="modal">
        <div class="modal-content modal-content-small">
            <div class="modal-header">
                <h2><i class="fas fa-calendar-check"></i> Archive Job</h2>
                <span class="close close-archive-date">&times;</span>
            </div>
            <form id="archiveDateForm">
                <p class="archive-prompt">Enter the date this job was completed:</p>
                <div class="form-group">
                    <label for="dateCompleted">
                        <i class="fas fa-calendar"></i> Date Completed *
                    </label>
                    <input type="date" id="dateCompleted" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelArchiveBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-archive"></i> Archive Job
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal" style="display: none;">
        <div class="modal-content modal-content-small">
            <div class="modal-header">
                <h2><i class="fas fa-lock"></i> Manufacturing Schedule Login</h2>
            </div>
            <form id="loginForm">
                <p class="login-prompt">Please sign in to access the application</p>
                <div style="background: #f0f9ff; border: 1px solid #0ea5e9; border-radius: 8px; padding: 12px; margin-bottom: 16px; font-size: 13px;">
                    <div style="font-weight: 600; margin-bottom: 8px; color: #0369a1;">Valid Credentials:</div>
                    <div style="margin-bottom: 4px;"><strong>Admin:</strong> TTAdmin / Admin1</div>
                    <div><strong>Shop:</strong> TTShop / Shopfloor</div>
                </div>
                <div class="form-group">
                    <label for="loginUsername">
                        <i class="fas fa-user"></i> Username *
                    </label>
                    <input type="text" id="loginUsername" required autocomplete="username" placeholder="TTAdmin or TTShop">
                </div>
                <div class="form-group">
                    <label for="loginPassword">
                        <i class="fas fa-key"></i> Password *
                    </label>
                    <input type="password" id="loginPassword" required autocomplete="current-password" placeholder="Enter password">
                </div>
                <div id="loginError" class="login-error" style="display: none;">
                    <i class="fas fa-exclamation-circle"></i> Invalid username or password
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        <i class="fas fa-sign-in-alt"></i> Sign In
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/main.js"></script>
</body>
</html>
